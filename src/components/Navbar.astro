---
import { Image } from "astro:assets";
import logo from "../assets/logo.svg";
---

<nav class="fixed w-full z-50 backdrop-blur-xl bg-white/70 dark:bg-slate-950/80 border-b border-gray-100 dark:border-slate-800 transition-colors duration-300">
    <div class="max-w-7xl mx-auto px-6 lg:px-12">
        <div class="flex items-center justify-between h-24">
            <div class="flex-shrink-0 flex flex-col items-start cursor-pointer group">
                <Image
                    src={logo}
                    alt="Nexus Digital Innovations"
                    height={36}
                    class="h-12 w-auto group-hover:scale-105 transition-transform duration-200 dark:brightness-0 dark:invert"
                />
            </div>
            <div class="hidden md:flex items-center space-x-12">
                <div class="flex items-center space-x-10">
                    <a
                        class="text-[0.8rem] uppercase tracking-widest font-semibold text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors"
                        href="#services"
                    >
                        Services
                    </a>
                    <a
                        class="text-[0.8rem] uppercase tracking-widest font-semibold text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors"
                        href="#industries"
                    >
                        Industries
                    </a>
                    <a
                        class="text-[0.8rem] uppercase tracking-widest font-semibold text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors"
                        href="#projects"
                    >
                        Work
                    </a>
                    <a
                        class="text-[0.8rem] uppercase tracking-widest font-semibold text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors"
                        href="#about"
                    >
                        About
                    </a>
                </div>
                <a
                    class="px-8 py-3 bg-slate-900 text-white text-xs uppercase tracking-widest font-bold rounded-full hover:bg-slate-800 transition-all shadow-lg shadow-slate-200 dark:shadow-none dark:border dark:border-slate-700"
                    href="#contact"
                >
                    Let's Talk
                </a>
                <button
                    id="theme-toggle"
                    type="button"
                    class="relative flex h-9 w-9 cursor-pointer items-center justify-center rounded-full border border-gray-200 bg-white text-gray-700 shadow-sm transition-all hover:border-blue-400 hover:text-blue-600 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-400 dark:hover:border-blue-500 dark:hover:text-blue-400"
                    aria-label="Cambiar tema"
                >
                    <span class="material-symbols-outlined absolute text-[18px] transition-all duration-300 scale-100 rotate-0 opacity-100 dark:scale-0 dark:-rotate-90 dark:opacity-0">dark_mode</span>
                    <span class="material-symbols-outlined absolute text-[18px] transition-all duration-300 scale-0 rotate-90 opacity-0 dark:scale-100 dark:rotate-0 dark:opacity-100">light_mode</span>
                </button>
            </div>
            <div class="md:hidden flex items-center gap-4">
                <button
                    id="theme-toggle-mobile"
                    type="button"
                    class="relative flex h-9 w-9 cursor-pointer items-center justify-center rounded-full border border-gray-200 bg-white text-gray-700 shadow-sm transition-all hover:border-blue-400 hover:text-blue-600 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-400 dark:hover:border-blue-500 dark:hover:text-blue-400"
                    aria-label="Cambiar tema"
                >
                    <span class="material-symbols-outlined absolute text-[18px] transition-all duration-300 scale-100 rotate-0 opacity-100 dark:scale-0 dark:-rotate-90 dark:opacity-0">dark_mode</span>
                    <span class="material-symbols-outlined absolute text-[18px] transition-all duration-300 scale-0 rotate-90 opacity-0 dark:scale-100 dark:rotate-0 dark:opacity-100">light_mode</span>
                </button>
                <button
                    id="mobile-menu-button"
                    class="p-2 text-slate-900 dark:text-white hover:text-slate-700 dark:hover:text-slate-300 transition-colors cursor-pointer"
                    aria-label="Toggle menu"
                >
                    <span id="menu-icon" class="material-symbols-outlined"> menu </span>
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div
        id="mobile-menu"
        class="hidden md:hidden absolute top-24 left-0 w-full bg-white dark:bg-slate-900 border-b border-gray-100 dark:border-slate-800 shadow-lg transition-all duration-300 ease-in-out"
    >
        <div class="px-6 py-8 flex flex-col space-y-6">
            <a
                class="text-lg uppercase tracking-widest font-semibold text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors mobile-menu-link"
                href="#services"
            >
                Services
            </a>
            <a
                class="text-lg uppercase tracking-widest font-semibold text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors mobile-menu-link"
                href="#industries"
            >
                Industries
            </a>
            <a
                class="text-lg uppercase tracking-widest font-semibold text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors mobile-menu-link"
                href="#projects"
            >
                Work
            </a>
            <a
                class="text-lg uppercase tracking-widest font-semibold text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors mobile-menu-link"
                href="#about"
            >
                About
            </a>
            <a
                class="px-8 py-4 bg-slate-900 dark:bg-slate-800 text-white text-sm uppercase tracking-widest font-bold rounded-full hover:bg-slate-800 dark:hover:bg-slate-700 transition-all shadow-lg text-center mobile-menu-link"
                href="#contact"
            >
                Let's Talk
            </a>
        </div>
    </div>
</nav>

<script>
    // Theme toggle functionality
    const themeToggleBtn = document.getElementById('theme-toggle');
    const themeToggleMobileBtn = document.getElementById('theme-toggle-mobile');

    const handleToggleClick = () => {
        const element = document.documentElement;
        element.classList.toggle("dark");

        const isDark = element.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
    }

    if (themeToggleBtn) {
        themeToggleBtn.addEventListener('click', handleToggleClick);
    }

    if (themeToggleMobileBtn) {
        themeToggleMobileBtn.addEventListener('click', handleToggleClick);
    }

    // Mobile menu toggle functionality
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");
    const menuIcon = document.getElementById("menu-icon");
    const mobileMenuLinks = document.querySelectorAll(".mobile-menu-link");

    // Toggle menu visibility
    function toggleMenu() {
        const isHidden = mobileMenu?.classList.contains("hidden");

        if (isHidden) {
            mobileMenu?.classList.remove("hidden");
            menuIcon!.textContent = "close";
        } else {
            mobileMenu?.classList.add("hidden");
            menuIcon!.textContent = "menu";
        }
    }

    // Close menu
    function closeMenu() {
        mobileMenu?.classList.add("hidden");
        menuIcon!.textContent = "menu";
    }

    // Event listeners
    mobileMenuButton?.addEventListener("click", toggleMenu);

    // Close menu when clicking on any link
    mobileMenuLinks.forEach((link) => {
        link.addEventListener("click", closeMenu);
    });

    // Close menu when clicking outside
    document.addEventListener("click", (event) => {
        const target = event.target as HTMLElement;
        if (
            !mobileMenu?.contains(target) &&
            !mobileMenuButton?.contains(target) &&
            !mobileMenu?.classList.contains("hidden")
        ) {
            closeMenu();
        }
    });

    // Close menu on escape key
    document.addEventListener("keydown", (event) => {
        if (event.key === "Escape" && !mobileMenu?.classList.contains("hidden")) {
            closeMenu();
        }
    });
</script>
